---
title: 约瑟夫环问题（猴子选大王）
date: 2019-04-16 15:36:52
categories:
- PHP
tags: 
- 算法
---

约瑟夫斯问题问题有时候也被描述成猴子选大王问题，题目如下。（最后会贴上约瑟夫问题的来历）

一群猴子排成一圈，按1,2,…,n依次编号。

然后从第1只开始数，数到第m只,把它踢出圈，从它后面再开始数，再数到第m只，在把它踢出去…，如此不停的进行下去，直到最后只剩下一只猴子为止，那只猴子就叫做大王。

要求编程模拟此过程，输入m、n, 输出最后那个大王的编号。

用程序模拟该过程，代码如下：

``` php
<?php

    function monkeyKing($n, $m)
    {
        $arr = range(1, $n);     //构造一个数组
        $i   = 1;                       //从第一个开始循环

        while (count($arr) > 1) {          //如果总数大于1

            if ($i % $m != 0) {
                $arr[] = $arr[$i - 1];    //不被踢出则压入数组尾部
            }
            unset($arr[$i - 1]);          //压入数组然后删除
            $i++;                       //继续循环
        }
        return $arr[$i - 1];             //直到剩下最后一个大王

    }

    $king = monkeyKing(5, 3);
```


``` php
    function king($n, $m)
    {
        $monkey = range(1, $n);            //模拟建立一个连续数组
        $i      = 0;
        while (count($monkey) > 1) {
            $i    += 1;//开始查数
            $head = array_shift($monkey);   //直接一个一个出列最前面的猴子
            if ($i % $m != 0) {
                array_push($monkey, $head);  //如果没数到m或m的倍数,则把该猴放回尾部去.
            }    //否则就抛弃掉了
        }
        return $monkey[0];
    }

    echo '剩余', king(3, 4), '号猴子';
    

```

下面是模拟的过程，对于不剔除的猴子，不断的加入数组尾部：

```
 $n = 5
 $m = 3
 $arr = [1, 2, 3, 4, 5]

 $i   $arr
 ---+------------------------
 1    x 2 3 4 5 1
 2    x x 3 4 5 1 2
>3    x x x 4 5 1 2
 4    x x x x 5 1 2 4
 5    x x x x x 1 2 4 5
>6    x x x x x x 2 4 5
 7    x x x x x x x 4 5 2
 8    x x x x x x x x 5 2 4
>9    x x x x x x x x x 2 4
 10   x x x x x x x x x x 4 2
 11   x x x x x x x x x x x 2 4
>12   x x x x x x x x x x x x 4
```

据说著名犹太历史学家 Josephus有过以下的故事：在罗马人占领乔塔帕特后，39 个犹太人与Josephus及他的朋友躲到一个洞中，39个犹太人决定宁愿死也不要被敌人抓到，于是决定了一个自杀方式，41个人排成一个圆圈，由第1个人开始报数，每报数到第3人该人就必须自杀，然后再由下一个重新报数，直到所有人都自杀身亡为止。然而Josephus 和他的朋友并不想遵从。首先从一个人开始，越过k-2个人（因为第一个人已经被越过），并杀掉第k个人。接着，再越过k-1个人，并杀掉第k个人。这个过程沿着圆圈一直进行，直到最终只剩下一个人留下，这个人就可以继续活着。问题是，给定了和，一开始要站在什么地方才能避免被处决？Josephus要他的朋友先假装遵从，
他将朋友与自己安排在第16个与第31个位置，于是逃过了这场死亡游戏。